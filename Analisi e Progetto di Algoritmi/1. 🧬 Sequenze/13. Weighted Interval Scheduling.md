>[!Premise]
>Sia $A = \{1, 2, . . . , n\}$ un insieme di n attivitè, con $n ∈ N$. Ad ogni attività $i ∈ A$ sono associate le seguenti informazioni $([s_i , e_i), v_i)$, dove:
>- $s_i$ indica il tempo di inizio dell’attività 
>- $e_i$ , con $e_i ≥ s_i$ , indica il tempo di fine dell’attività (si noti che $e_i$ **non appartiene all’intervallo** che specifica la durata dell’attività) 
>- $v_i$ indica il valore dell’attività
>
>Due attività $i, j ∈ A$ sono dette $compatibili$ se non si sovrappongono: $$[s_i , e_i) ∩ [s_j , e_j ) = ∅$$
>
>Un insieme $A$ di attività contiene attività $mutualmente\ compatibili$ se e solo se per tutte le coppie $(i, j) \text{ con } i \neq j$, l’attività $i$ è compatibile con l’attività $j$: $$∀i, j ∈ A \text{ con } i \neq j, [s_i , e_i) ∩ [s_j , e_j ) = ∅$$
>
>Definiamo ora la funzione $$COMP : P(\{1, . . . , n\}) → \{T rue, F alse\}$$
>che associa ad ogni sottoinsieme di attività $A ⊆ \{1, . . . , n\}$, $True$ se $A$ contiene attività $mutualmente\ compatibili$, $False$ altrimenti. Formalmente, $∀A ⊆ \{1, . . . , n\}$: 
>$$COMP(A) = 
\begin {cases} 
True & ∀i, j ∈ A \text{ con } i \neq j, [s_i , e_i) ∩ [s_j , e_j ) = ∅ \\
False & altrimenti \\
\end {cases}
>$$
>Infine, definiamo la funzione $$V : P(\{1, . . . , n\}) → R_+$$
>che associa ad ogni sottoinsieme di attività $A ⊆ \{1, . . . , n\}$, il suo valore complessivo. Formalmente, $∀A ⊆ \{1, . . . , n\}$:
>$$V(A) = 
\begin {cases} 
\sum\limits_{i ∈ A} {v_i} & A \neq ∅ \\
0 & A = ∅\\
\end {cases}
>$$

*Dato un insieme $\{1, . . . , n\}$ di attività, trovare un suo sottoinsieme di attività mutualmente compatibili di valore massimo.*

---
## Sottoproblemi

*Dato un insieme $\{1, . . . , i\}$ di attività, trovare un suo sottoinsieme di attività mutualmente compatibili di valore massimo.*

ossia: 
- Istanza: $\{1, . . . , i\}$ con $([s_j , e_j ), v_j ), ∀j ∈ \{1, . . . , i\}$
- Soluzione: $S_i ⊆ \{1, . . . , i\}$ tale che $$COMP(S_i) = T rue ∧ V(Si) = max_{A⊆\{1,...,i\}: COMP(A)=True} \{V(A)\}$$
- Considerato il sottoproblema di dimensione $(i)$, la `variabile` ad esso associata è $(OPT_i , S_i)$ ed è così definita:
	- $OPT_i = V(S_i)$, ossia il valore di un sottoinsieme di $\{1, . . . , i\}$ che contiene attività mutualmente compatibili di peso massimo
	- $S_i$, un sottoinsieme di $\{1, . . . , i\}$ che contiene attività mutualmente compatibili di peso massimo, pari a $OPT_i$

**Numero di sottoproblemi**: $n+1$
**Soluzione del problema**: $(OPT_n, S_n)$

---
## Equazioni di ricorrenza
#### <u>**Caso base**</u>: $i ≥ j$
- $i = j$: allora $S_{i,j}$ è composta da un solo carattere e quindi è palindroma, quindi $$m_{i,j} = 0$$
- $i > j$: allora $S_{i,j}$ è vuota e quindi è palindroma, quindi $$m_{i,j} = 0$$
- quindi $$m_{i,j} = 0 \quad\text{se } i\geq j$$
#### <u>**Passo ricorsivo**</u>: $i < j$
Il passo ricorsivo si ha per un qualunque sottoproblema di dimensione $(i, j)$ con $i < j$, ossia quando la sottostringa $S_{i,j}$ è composta da almeno due caratteri.
- $s_i = s_j$ : allora $S_{i,j}$ è palindroma se lo è anche $S_{i+1,j−1}$, quindi $$m_{i,j} = m_{i+1,j−1}$$
- $s_i \neq s_j$ : allora $S_{i,j}$ è palindroma se lo è anche $S_{i+1,j}$ o $S_{i,j−1}$, quindi $$m_{i,j} = min(m_{i+1,j} , m_{i,j−1}) + 1$$
- risulta quindi:
$$m_{i, j} = 
\begin {cases} 
0 & i ≥ j \\
m_{i+1,j−1} & i < j ∧ s_i = s_j \\
min(m_{i+1,j} , m_{i,j−1}) + 1 & i < j ∧ s_i \neq s_j
\end {cases}
$$

---
## Algoritmo DP

- uso una **matrice** $m[0...n][0...n]$ per salvare tutti i `sottoproblemi` $m_{i, j}$

``` Pseudocodice TI:"PAL" "FOLD"
def PAL(S) 
	for j from 1 to n do
		for i from j to n
			m[i, j] = 0
	for i from n-1 to 1 do
		for j from i + 1 to n do
			if s[i] = s[j] then
				m[i, j] = m[i+1, j-1]
			else
				M1 = m[i+1, j]
				M2 = m[i, j-1]
				m[i, j] = min(M1, M2)
	return m[1, n]
```

> [!Summary]
> - ***Complessità***: $O(n^2)$
> - ***Memoria***: $O(n^2)$

![[Pasted image 20231116153032.png]]